1. Включить хеширование
1.1. Добавить синхронизацию главного потока
1.2  Добавить отмену работы 
2. Сделать управление ресурсами через shared_ptr
 



